{%- comment -%}
  This is a required section for the Shopify Theme Store.
  It is available when you add the "Image with text" section in the theme editor.

  Theme Store required settings
  - Image
  - Heading: title of the block
  - Text: description of the block

  Theme Store optional settings
  - Button label: label associated with the button
  - Button link: link of the button
{%- endcomment -%}
{% capture image_layout %}
  <div class="image-with-text__image">
    {% if section.settings.image != blank %}
      {% include 'responsive-image' with
        image: section.settings.image,
        max_width: 640,
        max_height: 580
      %}
    {% else %}
      {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
    {% endif %}
  </div>
{% endcapture %}

<div class="page-width">
  <section class="image-with-text {% if section.settings.layout == 'right' %}image-with-text--right{% endif %} {{ section.settings.margin_bottom }}">

    {{ image_layout }}

    <div class="image-with-text__text">
      {% if section.settings.title != blank %}
        <h2>{{ section.settings.title | escape }}</h2>
      {% endif %}
      {% if section.settings.text != blank %}
        <div>{{ section.settings.text }}</div>
      {% endif %}
      {% if section.settings.button_label != blank and section.settings.button_link != blank %}
        <a href="{{ section.settings.button_link }}" class="button--white button--white--compress">
          {{ section.settings.button_label | escape }}
        </a>
      {% endif %}
    </div>

  </section>
</div>