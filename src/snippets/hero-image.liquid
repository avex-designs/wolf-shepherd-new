{% if type == "section" %}
  {% assign sectionId = section.id %}
  {% assign sectionEnable = section.settings.enable %}
  {% assign sectionAlign = section.settings.alignment %}
  {% assign sectionPositionX = section.settings.positionX %}
  {% assign sectionPositionY = section.settings.positionY %}    
  {% assign sectionImage = section.settings.image | img_url: 'master'  %}
  {% if section.settings.mobile_image != blank %}
    {% assign sectionImageMobile = section.settings.mobile_image | img_url: 'master'  %}
  {% else %}
    {% assign sectionImageMobile = section.settings.image | img_url: 'master'  %}
  {% endif %}
  {% assign sectionHeight = section.settings.height %}
  {% assign sectionFullWidth = section.settings.full-width %}
  {% assign sectionMarginBottom = section.settings.margin_bottom %}
  {% assign sectionTextColor = section.settings.text_color %}
  {% assign sectionTitle = section.settings.title %}
  {% assign sectionText = section.settings.text %}
  {% assign sectionButtonLabel = section.settings.button_label %}
  {% assign sectionButtonLink = section.settings.button_link %}
  {% assign sectionButtonColor = section.settings.button_color %}
  {% assign sectionMobileTextPosition = section.settings.mobile_text_position %}
{% elsif type == "collection" %}
  {% assign sectionId = section.id %}
  {% assign sectionEnable = section.settings.enable %}
  {% assign sectionAlign = section.settings.alignment %}
  {% assign sectionPositionX = section.settings.positionX %}
  {% assign sectionPositionY = section.settings.positionY %}
  {% if collection.metafields.collection['alternate-image'] != blank %}
    {% assign sectionImage = collection.metafields.collection['alternate-image']  %}
    {% assign sectionImageMobile = collection.metafields.collection['alternate-image'] %}
  {% else %}
    {% assign sectionImage = collection.image | img_url: 'master'  %}
    {% assign sectionImageMobile = collection.image | img_url: 'master'  %}
  {% endif %}
  {% assign sectionHeight = 'hero-image--small' %}
  {% assign sectionFullWidth = section.settings.full-width %}
  {% assign sectionMarginBottom = section.settings.margin_bottom %}
  {% assign sectionTextColor = section.settings.text_color %}
  {% assign sectionTitle = collection.title %}
  {% assign sectionText = collection.description %}
  {% assign sectionButtonLabel = blank %}
  {% assign sectionButtonLink = blank %}
  {% assign sectionButtonColor = blank %}
  {% assign sectionMobileTextPosition = section.settings.mobile_text_position %}
{% elsif type == "article" %}
  {% assign sectionId = 'null' %}
  {% assign sectionEnable = true %}
  {% assign sectionAlign = 'center' %}
  {% assign sectionImage = article.image | img_url: 'master' %}
  {% assign sectionImageMobile = article.image | img_url: 'master' %}
  {% assign sectionFullWidth = 'wrapper' %}
  {% assign sectionMarginBottom = 'margin' %}
  {% assign sectionTextColor = 'white' %}
  {% assign sectionTitle = article.title %}
  {% assign sectionText = article.content | strip_html | truncate: 100 %}
  {% assign sectionButtonLabel = 'Read more' %}
  {% assign sectionButtonLink = article.url %}
  {% assign sectionButtonColor = 'white' %}
{% else %}
  {% assign sectionId = block.id %}
  {% assign sectionEnable = block.settings.enable %}
  {% assign sectionAlign = block.settings.alignment %}
  {% assign sectionPositionX = block.settings.positionX %}
  {% assign sectionPositionY = block.settings.positionY %}   
  {% assign sectionImage = block.settings.image | img_url: 'master'  %}
  {% if section.settings.mobile_image != blank %}
    {% assign sectionImageMobile = block.settings.mobile_image | img_url: 'master'  %}
  {% else %}
    {% assign sectionImageMobile = block.settings.image | img_url: 'master'  %}
  {% endif %}
  {% assign sectionFullWidth = block.settings.full-width %}
  {% assign sectionMarginBottom = block.settings.margin_bottom %}
  {% assign sectionTextColor = block.settings.text_color %}
  {% assign sectionTitle = block.settings.title  %}
  {% assign sectionText = block.settings.text %}
  {% assign sectionButtonLabel = block.settings.button_label %}
  {% assign sectionButtonLink = block.settings.button_link %}
  {% assign sectionButtonColor = block.settings.button_color %}
  {% assign sectionMobileTextPosition = block.settings.mobile_text_position %}
{% endif %}

{% if sectionEnable %}
  {% if sectionFullWidth != 'full-width' %}<div class="page-width">{% endif %}

  {% capture textCapture %}
    {% if sectionTitle != blank %}
      <h2 class="h1 hero-image__title">{{ sectionTitle }}</h2>
    {% endif %}
    
    <div class="rte-setting hero-image__text">
      {% if sectionText != blank %}{{ sectionText }}{% endif %}
      {% if sectionButtonLabel != blank and sectionButtonLink != blank %}
        <a href="{{ sectionButtonLink }}" class="{{ sectionButtonColor }}">
          {{ sectionButtonLabel }}
        </a>
      {% endif %}
    </div>
  {% endcapture %}
   
  <div class="hero-image hero-image--{{ sectionId }} 
    {{ sectionHeight }}
    {{ sectionPositionX }}
    {{ sectionPositionY }} 
    {{ sectionAlign }} 
    {{ sectionTextColor }}
    {{ sectionMarginBottom }} 
    {{ sectionMobileTextPosition }} lazyload" 
    data-bgset="{{sectionImageMobile}} [(max-width: 749px)] | {{sectionImage}}">

    <div class="hero-image__wrapper">
      {{ textCapture }}
    </div>
  </div>

  {% if sectionMobileTextPosition contains "--mobile-text-under" %}
    <div class="hero-image__mobile-text">
      {{ textCapture }}
    </div>
  {% endif %}

  {% if sectionFullWidth != 'full-width' %}</div>{% endif %}
  
{% endif %}