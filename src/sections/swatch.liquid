<style>
  {%- for block in section.blocks -%}
    {% assign blockColor = block.settings.color | handleize | downcase %}
    {% assign swatchBackground = block.settings.hex-code %}      
    .swatch-product--{{blockColor}} {
      background-color: {{swatchBackground}} !important;
      {% if block.settings.color_image != blank %}
        background-image: url({{block.settings.color_image | img_url: '40x'}}) !important;
      {% endif %}
    }

    .product-form-mini--{{blockColor}} {
      background-color: {{swatchBackground}} !important;
      {% if block.settings.color_image != blank %}
        background-image: url({{block.settings.color_image | img_url: '40x'}}) !important;
      {% endif %} 
    }
  {%- endfor -%}
</style>

{% schema %}
  {
    "name": "Swatch",
    "blocks": [
      {
        "type": "swatch",
        "name": "Swatch",
        "settings": [
          {
            "type": "text",
            "id": "color",
            "label":"Colour variant name"
          },
          {
            "type": "color",
            "id": "hex-code",
            "label":"Colour hex code"
          },
          {
            "type": "image_picker",
            "id": "color_image",
            "label":"Swatch image"
          }
        ]
      }
    ]
  }
{% endschema %}
